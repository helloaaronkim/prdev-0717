<?xml version='1.0' encoding='UTF-8' standalone='no'?><svg contentStyleType='text/css' height='805px' preserveAspectRatio='none' style='width:1073px;height:805px;background:#FFFFFF;' version='1.1' viewBox='0 0 1073 805' width='1073px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' zoomAndPan='magnify'><defs/><g><rect fill='none' height='167.7969' style='stroke:#000000;stroke-width:1.5;' width='838.5' x='228.5' y='100.5938'/><rect fill='none' height='174.7969' style='stroke:#000000;stroke-width:1.5;' width='629' x='228.5' y='282.3906'/><rect fill='none' height='222.9297' style='stroke:#000000;stroke-width:1.5;' width='728.5' x='9' y='471.1875'/><line style='stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;' x1='105' x2='105' y1='83.5938' y2='711.1172'/><line style='stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;' x1='332.5' x2='332.5' y1='83.5938' y2='711.1172'/><line style='stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;' x1='743.5' x2='743.5' y1='83.5938' y2='711.1172'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='159' x='23' y='63.9951'>cancelled-flights-exchg</text><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='159' x='23' y='80.292'>Anypoint MQ exchange</text><path d='M87.5,15 C87.5,5 105.5,5 105.5,5 C105.5,5 123.5,5 123.5,15 L123.5,41 C123.5,51 105.5,51 105.5,51 C105.5,51 87.5,51 87.5,41 L87.5,15 ' fill='#E2E2F0' style='stroke:#181818;stroke-width:1.5;'/><path d='M87.5,15 C87.5,25 105.5,25 105.5,25 C105.5,25 123.5,25 123.5,15 ' fill='none' style='stroke:#181818;stroke-width:1.5;'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='159' x='23' y='723.1123'>cancelled-flights-exchg</text><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='159' x='23' y='739.4092'>Anypoint MQ exchange</text><path d='M87.5,752.7109 C87.5,742.7109 105.5,742.7109 105.5,742.7109 C105.5,742.7109 123.5,742.7109 123.5,752.7109 L123.5,778.7109 C123.5,788.7109 105.5,788.7109 105.5,788.7109 C105.5,788.7109 87.5,788.7109 87.5,778.7109 L87.5,752.7109 ' fill='#E2E2F0' style='stroke:#181818;stroke-width:1.5;'/><path d='M87.5,752.7109 C87.5,762.7109 105.5,762.7109 105.5,762.7109 C105.5,762.7109 123.5,762.7109 123.5,752.7109 ' fill='none' style='stroke:#181818;stroke-width:1.5;'/><rect fill='#E2E2F0' height='30.2969' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='188' x='238.5' y='52.2969'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='174' x='245.5' y='72.292'>Flights Management SAPI</text><rect fill='#E2E2F0' height='30.2969' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='188' x='238.5' y='710.1172'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='174' x='245.5' y='730.1123'>Flights Management SAPI</text><rect fill='#E2E2F0' height='30.2969' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='208' x='639.5' y='52.2969'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='194' x='646.5' y='72.292'>Flights Management system</text><rect fill='#E2E2F0' height='30.2969' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='208' x='639.5' y='710.1172'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='194' x='646.5' y='730.1123'>Flights Management system</text><path d='M228.5,100.5938 L522.5,100.5938 L522.5,107.7266 L512.5,117.7266 L228.5,117.7266 L228.5,100.5938 ' fill='#EEEEEE' style='stroke:#000000;stroke-width:1.5;'/><rect fill='none' height='167.7969' style='stroke:#000000;stroke-width:1.5;' width='838.5' x='228.5' y='100.5938'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='249' x='243.5' y='113.6606'>Register HTTP callback at startup</text><polygon fill='#808080' points='731.5,134.8594,741.5,138.8594,731.5,138.8594' style='stroke:#808080;stroke-width:1.0;'/><line style='stroke:#808080;stroke-width:1.0;' x1='332.5' x2='742.5' y1='138.8594' y2='138.8594'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='9' x='339.5' y='133.7935'>1</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='374' x='352.5' y='133.7935'>SOAP registerForCancellationNotifications(&lt;callbackURL&gt;)</text><line style='stroke:#808080;stroke-width:1.0;' x1='743.5' x2='785.5' y1='167.9922' y2='167.9922'/><line style='stroke:#808080;stroke-width:1.0;' x1='785.5' x2='785.5' y1='167.9922' y2='180.9922'/><line style='stroke:#808080;stroke-width:1.0;' x1='744.5' x2='785.5' y1='180.9922' y2='180.9922'/><polygon fill='#808080' points='754.5,176.9922,744.5,180.9922,754.5,184.9922,750.5,180.9922' style='stroke:#808080;stroke-width:1.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='9' x='750.5' y='162.9263'>2</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='145' x='763.5' y='162.9263'>Persist &lt;callbackURL&gt;</text><path d='M748,193.9922 L748,233.9922 L1057,233.9922 L1057,203.9922 L1047,193.9922 L748,193.9922 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M1047,193.9922 L1047,203.9922 L1057,203.9922 L1047,193.9922 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='288' x='754' y='211.0591'>Maintain list of all registered &lt;callbackURL&gt;s</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='222' x='754' y='226.1919'>Ignore duplicate &lt;&lt;callbackURL&gt;s</text><line style='stroke:#808080;stroke-width:1.0;' x1='333.5' x2='343.5' y1='243.2578' y2='247.2578'/><line style='stroke:#808080;stroke-width:1.0;' x1='332.5' x2='742.5' y1='243.2578' y2='243.2578'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='9' x='349.5' y='256.3247'>3</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='4' x='362.5' y='256.3247'>Â </text><path d='M228.5,282.3906 L511.5,282.3906 L511.5,289.5234 L501.5,299.5234 L228.5,299.5234 L228.5,282.3906 ' fill='#EEEEEE' style='stroke:#000000;stroke-width:1.5;'/><rect fill='none' height='174.7969' style='stroke:#000000;stroke-width:1.5;' width='629' x='228.5' y='282.3906'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='238' x='243.5' y='295.4575'>Receive cancellation notification</text><polygon fill='#808080' points='343.5,299.5234,333.5,303.5234,343.5,303.5234' style='stroke:#808080;stroke-width:1.0;'/><line style='stroke:#808080;stroke-width:1.0;' x1='332.5' x2='742.5' y1='303.5234' y2='303.5234'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='9' x='349.5' y='324.1567'>4</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='189' x='362.5' y='316.5903'>HTTP POST to &lt;callbackURL&gt;</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='150' x='362.5' y='331.7231'>cancellation notification</text><line style='stroke:#808080;stroke-width:1.0;' x1='332.5' x2='374.5' y1='364.9219' y2='364.9219'/><line style='stroke:#808080;stroke-width:1.0;' x1='374.5' x2='374.5' y1='364.9219' y2='377.9219'/><line style='stroke:#808080;stroke-width:1.0;' x1='333.5' x2='374.5' y1='377.9219' y2='377.9219'/><polygon fill='#808080' points='343.5,373.9219,333.5,377.9219,343.5,381.9219,339.5,377.9219' style='stroke:#808080;stroke-width:1.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='9' x='339.5' y='359.856'>5</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='206' x='352.5' y='359.856'>Validate cancellation notification</text><line style='stroke:#808080;stroke-width:1.0;' x1='332.5' x2='374.5' y1='407.0547' y2='407.0547'/><line style='stroke:#808080;stroke-width:1.0;' x1='374.5' x2='374.5' y1='407.0547' y2='420.0547'/><line style='stroke:#808080;stroke-width:1.0;' x1='333.5' x2='374.5' y1='420.0547' y2='420.0547'/><polygon fill='#808080' points='343.5,416.0547,333.5,420.0547,343.5,424.0547,339.5,420.0547' style='stroke:#808080;stroke-width:1.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='9' x='339.5' y='401.9888'>6</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='352' x='352.5' y='401.9888'>Publish cancellation notification to persistent VM queue</text><line style='stroke:#808080;stroke-width:1.0;' x1='741.5' x2='731.5' y1='449.1875' y2='453.1875'/><line style='stroke:#808080;stroke-width:1.0;' x1='332.5' x2='742.5' y1='449.1875' y2='449.1875'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='9' x='339.5' y='444.1216'>7</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='60' x='352.5' y='444.1216'>HTTP 202</text><path d='M9,471.1875 L378,471.1875 L378,478.3203 L368,488.3203 L9,488.3203 L9,471.1875 ' fill='#EEEEEE' style='stroke:#000000;stroke-width:1.5;'/><rect fill='none' height='222.9297' style='stroke:#000000;stroke-width:1.5;' width='728.5' x='9' y='471.1875'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='324' x='24' y='484.2544'>Transform and deliver flight canceled event</text><path d='M19,493.3203 L19,533.3203 L417,533.3203 L417,503.3203 L407,493.3203 L19,493.3203 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M407,493.3203 L407,503.3203 L417,503.3203 L407,493.3203 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='115' x='112.25' y='510.3872'>In one transaction</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='203' x='112.25' y='525.52'>if supported by message broker</text><line style='stroke:#808080;stroke-width:1.0;' x1='332.5' x2='374.5' y1='559.7188' y2='559.7188'/><line style='stroke:#808080;stroke-width:1.0;' x1='374.5' x2='374.5' y1='559.7188' y2='572.7188'/><line style='stroke:#808080;stroke-width:1.0;' x1='333.5' x2='374.5' y1='572.7188' y2='572.7188'/><polygon fill='#808080' points='343.5,568.7188,333.5,572.7188,343.5,576.7188,339.5,572.7188' style='stroke:#808080;stroke-width:1.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='9' x='339.5' y='554.6528'>8</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='373' x='352.5' y='554.6528'>Receive cancellation notification from persistent VM queue</text><line style='stroke:#808080;stroke-width:1.0;' x1='332.5' x2='374.5' y1='601.8516' y2='601.8516'/><line style='stroke:#808080;stroke-width:1.0;' x1='374.5' x2='374.5' y1='601.8516' y2='614.8516'/><line style='stroke:#808080;stroke-width:1.0;' x1='333.5' x2='374.5' y1='614.8516' y2='614.8516'/><polygon fill='#808080' points='343.5,610.8516,333.5,614.8516,343.5,618.8516,339.5,614.8516' style='stroke:#808080;stroke-width:1.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='9' x='339.5' y='596.7856'>9</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='372' x='352.5' y='596.7856'>Transform cancellation notification to flight canceled event</text><line style='stroke:#808080;stroke-width:1.0;' x1='332.5' x2='374.5' y1='643.9844' y2='643.9844'/><line style='stroke:#808080;stroke-width:1.0;' x1='374.5' x2='374.5' y1='643.9844' y2='656.9844'/><line style='stroke:#808080;stroke-width:1.0;' x1='333.5' x2='374.5' y1='656.9844' y2='656.9844'/><polygon fill='#808080' points='343.5,652.9844,333.5,656.9844,343.5,660.9844,339.5,656.9844' style='stroke:#808080;stroke-width:1.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='18' x='339.5' y='638.9185'>10</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='188' x='361.5' y='638.9185'>Validate flight canceled event</text><polygon fill='#808080' points='116.5,664.9844,106.5,668.9844,116.5,672.9844,112.5,668.9844' style='stroke:#808080;stroke-width:1.0;'/><line style='stroke:#808080;stroke-width:1.0;' x1='110.5' x2='331.5' y1='668.9844' y2='668.9844'/><text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacing' textLength='18' x='122.5' y='682.0513'>11</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='181' x='144.5' y='682.0513'>Publish flight canceled event</text></g></svg>